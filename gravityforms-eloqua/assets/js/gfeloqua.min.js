var gfeloqua_clear_form_transient,gfeloqua_clear_forms_transient,gfeloqua_oauth_window;jQuery(function(e){function t(e,t,n,o){var i=void 0!=window.screenLeft?window.screenLeft:screen.left,a=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var r=width/2-n/2+i,s=height/2-o/2+a;return gfeloqua_oauth_window=window.open(e,t,"scrollbars=yes, chrome=yes, menubar=no, toolbar=no, width="+n+", height="+o+", top="+s+", left="+r),window.focus&&gfeloqua_oauth_window.focus(),gfeloqua_oauth_window}gfeloqua_clear_form_transient=function(){var t=e("<div />").addClass("spinner"),n=e("#gaddon-setting-row-mapped_fields td"),o=e("#gfeloqua_form").val();return o?(t.show().css("visibility","visible"),n.find("table").hide(),n.append(t),void e.ajax({url:gfeloqua_strings.ajax_url,data:{action:"gfeloqua_clear_transient","transient":"assets/form/"+o},success:function(t){e("#gform-settings").submit()}})):!1},e('a[href$="#gfe-form-fields-refresh"]').on("click",function(e){return e.preventDefault(),gfeloqua_clear_form_transient(),!1}),gfeloqua_clear_forms_transient=function(){var t=e("<div />").addClass("spinner"),n=e("#gaddon-setting-row-gfeloqua_form td");t.show().css("visibility","visible"),n.find("select,.select2-container").hide(),n.append(t),e.ajax({url:gfeloqua_strings.ajax_url,data:{action:"gfeloqua_clear_transient","transient":"assets/forms"},success:function(t){e("#gform-settings").submit()}})},e('a[href$="#gfe-forms-refresh"]').on("click",function(e){return e.preventDefault(),gfeloqua_clear_forms_transient(),!1}),e("#gfeloqua_oauth").on("click",function(n){n.preventDefault();var o=e(this).attr("href"),i=e(this).data("width")?e(this).data("width"):600,a=e(this).data("height")?e(this).data("height"):600,r=t(o,"wclsc_oauth",i,a);e(this).hide(),e("#gfeloqua_oauth_code").show();var s=function(){setTimeout(function(){r.closed?location.reload(!0):s()},500)};return s(),!1}),e.fn.select2&&e("select#gfeloqua_form").length&&e("select#gfeloqua_form").select2({minimumResultsForSearch:10,width:"100%"}).on("change",function(){e(this).parents("form").submit()}),e("a.toggle-note-detail").on("click",function(t){t.preventDefault(),e(this).next(".gfeloqua-note-detail").slideToggle("fast")}),e(".gfeloqua-retry").on("click",function(t){t.preventDefault();var n=e(this),o=n.data("entry-id"),i=n.data("form-id");e.ajax({url:gfeloqua_strings.ajax_url,data:{action:"gfeloqua_resubmit_entry",entry_id:o,form_id:i},success:function(t){t.success&&n.remove(),e("#gfeloqua-notes").html(t.notes)}})})});
